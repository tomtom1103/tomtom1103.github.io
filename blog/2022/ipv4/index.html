<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> The Internet Protocol (IPv4) | Jonghyun (Thomas) Lee </title> <meta name="author" content="Jonghyun (Thomas) Lee"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="deep generative models"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/apple-touch-icon-precomposed.png?f3b0e00b51d3560daeef2cfef2a1c566"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://tomtom1103.github.io/blog/2022/ipv4/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Jonghyun</span> (Thomas) Lee </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item"> <a class="nav-link" href="/assets/pdf/Tom_Resume_0225.pdf" target="_blank" rel="noopener noreferrer">cv <span class="sr-only">(current)</span> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">The Internet Protocol (IPv4)</h1> <p class="post-meta"> August 22, 2022 </p> <p class="post-tags"> <a href="/blog/2022"> <i class="fa-solid fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/category/knowledge"> <i class="fa-solid fa-tag fa-sm"></i> knowledge</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="contents">Contents</h2> <ul> <li>The Internet Protocol</li> <li>Subnet Masks, Default Gateways, and Broadcast Addresses</li> <li>Public IP</li> <li>Private IP</li> </ul> <h2 id="the-internet-protocol">The Internet Protocol</h2> <p>컴퓨터를 처음 만지기 시작한 나이부터 IP 주소의 존재는 알고 있었지만, 딱히 무슨 원리로 동작하는지에 대해선 관심이 없었다. 그저 인터넷만 잘 연결되면 살아가는데 있어 별 문제가 없었기 때문이다. 하지만 최근 이사를 오며 본격적으로 홈네트워크를 구축하기 위해서 공부를 하다보니 정말 네트워킹에 대한 지식이 전무하다는 것을 깨닫고 차근차근 공부를 시작했다. IP의 작동원리는 개인 GPU 서버의 운영과 (아직 계획은 없지만) 나스 설치 등 많은 네트워킹 시스템의 근간이 되기 때문에 알아두는것이 좋다고 판단했다.</p> <p>Internet Protocol, 줄여서 IP 는 기계들의 통신을 담당하고, 다른 기계와 통신을 하고 싶은 기계는 IP주소가 필요하다. 많은 설명을 읽어봐도 제일 피부에 와닿는 설명은 <strong>전화번호</strong>다. 전화번호가 있어야만 다른 핸드폰으로 전화를 걸 수 있는 것 처럼, 컴퓨터는 IP주소가 있어야 인터넷에 접속할 수 있고 다른 컴퓨터와 통신을 할 수 있다. 윈도우머신의 터미널에 ipconfig 을 치면 간단하게 그 컴퓨터의 IP주소를 확인 할 수 있다.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/devops/ipv4/img1-480.webp 480w,/assets/img/posts/devops/ipv4/img1-800.webp 800w,/assets/img/posts/devops/ipv4/img1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/devops/ipv4/img1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>IPv4 Address가 바로 컴퓨터의 IP주소다. IP주소를 처음 보면 그저 숫자의 나열로밖에 보이지 않지만, 자세히 살펴보면 1~3개의 수 뒤에 점(.)이 있고, 총 4개의 숫자와 3개의 점으로 구성되어 있다. (적어도 IPv4에선) 이 규칙은 변하지 않는다. 이 IP 주소로 컴퓨터는 인터넷에 접속할 수 있고, 다른 컴퓨터가 이 IP 주소를 통해 나와 통신을 할 수 있다.</p> <p>IP주소의 모양이 4개의 숫자와 3개의 점의 규칙을 따르는 이유가 있다. 각 숫자는 0부터 255까지의 값을 가질 수 있는데, 이는 2의 8제곱에 해당되는 수다. 그리고 IP주소엔 총 4개의 숫자가 있으므로 IP주소가 가질 수 있는 값은 총 2의 32제곱 (약 43억)이 된다. 점(.) 으로 분리된 3자리 수는 octet 이라 한다.</p> <h2 id="subnet-masks-default-gateways-and-broadcast-addresses">Subnet Masks, Default Gateways, and Broadcast Addresses</h2> <p>위의 이미지를 보면, IP주소 밑에 Subnet Mask과 Default Gateway 라는 값들도 출력이 된다. Subnet Mask 는 쉽게 말하자면 IP주소의 <strong>유동성</strong> 을 관리해주는 값이다. 내 윈도우머신의 Subnet Mask 는 255.255.255.0 이란 값을 갖고, Subnet Mask 의 octet 중 255가 있으면 이는 내 IP주소의 해당 octet 이 <strong>변하지 않고 고정된다</strong>를 의미한다.</p> <table> <thead> <tr> <th>IP Octet</th> <th>Subnet Mask Octet</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>121</td> <td>255</td> <td>고정</td> </tr> <tr> <td>138</td> <td>255</td> <td>고정</td> </tr> <tr> <td>27</td> <td>255</td> <td>고정</td> </tr> <tr> <td>66</td> <td>0</td> <td>유동적</td> </tr> </tbody> </table> <p>즉, 내 윈도우머신의 IP주소의 앞 3개의 octet 은 변하지 않지만, 접속할때 마다 마지막 octet 은 변할 수 있다. 이 Subnet Mask 가 의미하는 것은 사실 해당 네트워크의 주소다. 네트워크는 간단하게 말해서 외부로 나가지 않고 내부에서 서로 통신할 수 있는 주소를 의미하는데, 만약 내 맥북이 121.138.27.xxx 라는 IP주소를 가지고 있다면 윈도우 컴퓨터와 내부망에서 통신을 할 수 있다.</p> <p>Default Gateway 는 우리가 집에 하나씩 가지고 있는 공유기의 주소다. 공유기도 사실 기기이기 때문에 IP주소를 할당받는데, 보통 마지막 octet 의 값이 254다. 255.255.255.0의 Subnet Mask를 가지고 있는 하나의 네트워크를 예시로 들어보자. 앞 3개의 octet 은 고정이기 때문에 결국 해당 네트워크에 연결할 수 있는 호스트 (기기)의 수는 253개이다. 0부터 255까지 비어있으니 256개가 아닌 이유는, 할당 할 수 없는 3개의 default 주소가 있기 때문이다. 이 주소들은 앞서 살펴본 Default gateway, xxx.xxx.xxx.0 의 값을 갖는 network address, 그리고 xxx.xxx.xxx.255 의 값을 갖는 broadcast address 이다. 이번 장에선 설명하지 않겠지만, 간단히 생각해서 첫 호스트 주소, 마지막 호스트 주소, 그리고 공유기의 주소 빼고 하나의 네트워크에 253개의 호스트가 연결 할 수 있다.</p> <h2 id="public-ip">Public IP</h2> <p>IP주소의 표기방식을 보면 2의 32제곱의 경우의 수를 갖기 때문에 약 43억개의 고유 IP주소가 생성된다. 그리고 이 IP주소는 처음 설계되었을때 5개의 클라스로 분류되었다.</p> <table> <thead> <tr> <th>Class</th> <th>Range</th> <th>Subnet Mask</th> </tr> </thead> <tbody> <tr> <td>A</td> <td>1.0.0.0 ~ 126.255.255.255</td> <td>255.0.0.0</td> </tr> <tr> <td>B</td> <td>128.0.0.0 ~ 191.255.0.0</td> <td>255.255.0.0</td> </tr> <tr> <td>C</td> <td>192.0.0.0 ~ 223.255.255.0</td> <td>255.255.255.0</td> </tr> <tr> <td>D</td> <td>224.0.0.0 ~ 239.255.255.255</td> <td> </td> </tr> <tr> <td>E</td> <td>240.0.0.0 ~ 255.255.255.255</td> <td> </td> </tr> </tbody> </table> <p>Class A, B, C 는 각자 다른 Subnet Mask 를 갖는다. 이 Subnet Mask 를 보면 해당 Class 의 IP주소의 capacity 를 어림짐작 할 수 있다. Class A 는 첫번째 octet 만 고정이기 때문에 126개의 네트워크밖에 없지만, 각 네트워크엔 2의 24제곱 (약 1천 6백만)개 의 호스트가 연결 할 수 있다. 반면에 Class C 는 약 1천 6백만개의 네트워크가 있으며, 각 네트워크엔 256개의 호스트만 연결 할 수 있다. Class 위로 올라갈 수록 <strong>네트워크의 수는 많아지며, 각 네트워크에 연결할 수 있는 호스트는 적어진다를 의미한다.</strong></p> <p>이렇게 Class 로 IP 를 할당하는 방식의 문제는 무엇일까? IANA (Internet Assigned Numbers Authority) 가 처음 IP주소를 관리하기 시작했을 때 Class A 네트워크를 대기업에게 무분별하게 나눠줬다. 예시로 9.0.0.0는 IBM이 독점적으로 소유하고 있으며, 이론상 IBM에게 할당된 IP주소의 수는 1천6백억개다. 처음 IP주소를 나누기 시작했을 때 절대 부족하지 않을거라 생각을 했지만, 이미 2015년엔 IP 주소가 고갈되었다. 심지어 Class D, E 는 각자 특수한 케이스로 사용되기 때문에 일반 사용자는 접근조차 못한다. 이런 상황을 타계하기 위해 등장한 것이 바로 Private IP와 Subnetting 이다.</p> <h2 id="private-ip">Private IP</h2> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/devops/ipv4/img1-480.webp 480w,/assets/img/posts/devops/ipv4/img1-800.webp 800w,/assets/img/posts/devops/ipv4/img1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/devops/ipv4/img1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>위 사진은 나의 실제 IP주소이다. 하지만 공개해도 위험하지 않는 이유는 바로 사설 IP 주소이기 때문이다. 앞서 말한 것 처럼 공인 IP가 고갈되었기 때문에, 고갈되기 전 IANA가 몇개의 주소를 사설 IP 로 사용하도록 떼어냈다.</p> <table> <thead> <tr> <th>Class</th> <th>Range</th> <th>Subnet Mask</th> </tr> </thead> <tbody> <tr> <td>A</td> <td>10.0.0.0 ~ 10.255.255.255</td> <td>255.0.0.0</td> </tr> <tr> <td>B</td> <td>172.16.0.0 ~ 172.31.255.255</td> <td>255.255.0.0</td> </tr> <tr> <td>C</td> <td>192.168.0.0 ~ 192.168.255.255</td> <td>255.255.255.0</td> </tr> </tbody> </table> <p>위 표는 사설 IP 주소들이다. 사설 IP 는 공인 IP 와 다르게 중복해서 사용할 수 있지만, 직접 인터넷과 연결 할 수 없다. 공유기가 NAT (Network Address Translation) 이란 작업을 수행해야만 사설 IP 를 가진 호스트들이 인터넷과 통신을 할 수 있다.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/devops/ipv4/img2-480.webp 480w,/assets/img/posts/devops/ipv4/img2-800.webp 800w,/assets/img/posts/devops/ipv4/img2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/devops/ipv4/img2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>기본적으로 ISP (Internet Service Provider, KT 같은 통신사) 가 공유기로 공인 IP를 할당한다. 그리고 공유기의 네트워크에 연결되어 있는 호스트들에게 사설 IP를 부여한다. 공유기의 네트워크에 연결되어 있기 때문에 IP주소 앞 3개의 octet 이 같다. 만약 윈도우머신이 인터넷으로 접속하고 싶다면, 공유기는 윈도우의 사설 IP 를 NAT 라는 작업을 통해 ISP 가 제공해준 공인 IP 로 바꿔준다 (request). 인터넷에서 response 를 받는다면 공유기가 이걸 호스트에게 전달해주는 방식이다.</p> <p>사설 IP의 등장으로 주소고갈 문제는 어느정도 해결을 할 수 있었지만, 근본적인 해결책은 아니기에 subnetting 과 IPv6 의 도입을 반길 수밖에 없다.</p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Jonghyun (Thomas) Lee. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>